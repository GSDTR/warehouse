(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(68)},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(10),l=a.n(n),c=(a(32),a(3)),o=a(4),i=a(7),d=a(5),p=a(6),u=a(1),m=(a(34),a(36),a(11)),h=document.body,v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e)))._preSearchData=a.props.initialData,a.state={data:a.props.initialData,sortby:null,descending:!1,edit:null,search:a.props.search,hideCompleted:!1},a._searchFields=Array(a.props.headers.length).join(".").split("."),a._resultedRow=Array(a.props.headers.length).join(".").split("."),Object(u.a)(Object(u.a)(a))._search=a._search.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).search_loop=a.search_loop.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._showEditor=a._showEditor.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._renderSearch=a._renderSearch.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._sort=a._sort.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._save=a._save.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"hideCompleted",value:function(e){this.setState({hideCompleted:e})}},{key:"updateData",value:function(e){for(var t=e,a=0;a<e.length;a++)for(var r=e[a],s=0;s<r.length;s++)null==r[s]&&(console.log("null",r[s]),r[s]="");this.setState({data:t}),this._preSearchData=t;var n=this.search_loop(this._preSearchData);this.sort_data(n,this._sortingColumn,!1)}},{key:"sort_data",value:function(e,t){var a,r=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._sortingColumn=t,a=s?this.state.sortby===t&&!this.state.descending:this.state.sortby===t&&this.state.descending,e.sort(function(e,s){var n=0,l=0,c=r.props.headers[t];if("numeric"==r.props.columnDataTypes[t]||"int"==r.props.columnDataTypes[t])""!=e[c]&&(n=parseInt(e[c],10)),""!=s[c]&&(l=parseInt(s[c],10));else if("alphaNumeric"==r.props.columnDataTypes[t]){var o=/(?<!\d)[\d](?!\d)/g;n=e[c].replace(o,"0$&"),l=s[c].replace(o,"0$&")}else n=e[c],l=s[c];return 0==a?n<l?-1:n>l?1:0:n<l?1:n>l?-1:0}),this.setState({data:e,sortby:t,descending:a})}},{key:"_sort",value:function(e){var t=e.target.cellIndex,a=this.state.data.slice();this.sort_data(a,t)}},{key:"_showEditor",value:function(e){this.setState({edit:{row:parseInt(e.target.dataset.row,10),cell:e.target.cellIndex}})}},{key:"postData",value:function(e,t){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&a.status},a.send(JSON.stringify(t))}},{key:"fetchData",value:function(e){var t=new XMLHttpRequest;t.responseType="json",t.onload=function(){var e=t.response;console.log("responce: ",e),"true"!=e.success&&alert(e.error)},t.open("GET",e,!0),t.send(null)}},{key:"_save",value:function(e){e.preventDefault();var t=e.target.firstChild,a=this.state.data.slice(),r=this.state.edit.row,s=this.state.edit.cell,n=this.props.headers[s],l=t.value,c=this.state.data[r][this.props.headers[0]],o=this.state.data[r][this.props.headers[4]];console.log("param ",n," val ",l),this.fetchData("/api/v1/cell/"+c+"?action=update&param="+n+"&val="+encodeURIComponent(l)+"&part_number="+o),m(this.state.edit,"edit field can't be undefined here!"),a[this.state.edit.row][this.state.edit.cell]=t.value,this.setState({edit:null,data:a})}},{key:"search_loop",value:function(e){for(var t=this,a=0,r="",s=0;s<this._searchFields.length;s++)a=s,""!=(r=this._searchFields[s])&&(e=e.filter(function(e){return"numeric"==t.props.columnDataTypes[s]||"int"==t.props.columnDataTypes[s]?e[t.props.headers[a]]==r:e[t.props.headers[a]].toString().toLowerCase().indexOf(r)>-1}));return e}},{key:"_search",value:function(e){var t=e.target.value.toLowerCase(),a=e.target.dataset.idx;this._searchFields[a]=t;var r=this._preSearchData;r=this.search_loop(r),this.sort_data(r,this._sortingColumn,!1)}},{key:"exportBlob",value:function(e,t){var a=window.URL||window.webkitURL,r=new Blob([t],{type:"text/"+e}),s=document.createElement("a"),n=a.createObjectURL(r);s.href=n,s.download="data."+e,null!=h&&h.appendChild(s),s.click(),setTimeout(function(){null!=h&&h.removeChild(s),window.URL.revokeObjectURL(n)},0)}},{key:"exportJSON",value:function(){var e=JSON.stringify(this.state.data);this.exportBlob("json",e)}},{key:"exportCSV",value:function(){var e=this.state.data.reduce(function(e,t){return e+t.reduce(function(e,a,r){return e+'"'+a.replace(/"/g,'""')+'"'+(r<t.length-1?",":"")},"")+"\n"},"");this.exportBlob("csv",e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"Excel"},this._renderTable())}},{key:"_renderSearch",value:function(){var e=this;return this.state.search?s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return s.a.createElement("td",{key:a,class:e.props.columnClasses[a]},s.a.createElement("input",{type:"text","data-idx":a}))})):null}},{key:"_renderResultRow",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return a==e.props.headers.length-1?s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e.rowIdxToDisplay):s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e._resultedRow[a])}))))}},{key:"componentDidUpdate",value:function(e,t){this._focusElem&&this._focusElem.focus()}},{key:"_renderTable",value:function(){var e,t=this;for(this.rowIdxToDisplay=0,e=0;e<this._resultedRow.length;e++)"int"==this.props.columnDataTypes[e]?this._resultedRow[e]=0:"serial"==this.props.columnDataTypes[e]&&(this._resultedRow[e]=0);return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",{onClick:this._sort},s.a.createElement("tr",null,this.props.headers.map(function(e,a){return t.state.sortby===a&&(e+=t.state.descending?" \u2191":" \u2193"),s.a.createElement("th",{key:a,class:t.props.columnClasses[a]},e)},this))))),s.a.createElement("div",{class:"tbl"},s.a.createElement("table",null,s.a.createElement("tbody",{onDoubleClick:this._showEditor},this._renderSearch(),this.state.data.map(function(e,t){var a=this;return this.rowIdxToDisplay+=1,s.a.createElement("tr",{key:t,class:"notFinished"},this.props.headers.map(function(e,r){var n=a.state.data[t][e],l=a.state.edit;if(l&&l.row===t&&l.cell===r&&(n=s.a.createElement("form",{onSubmit:a._save},s.a.createElement("input",{type:"text",defaultValue:n,ref:function(e){return a._focusElem=e}}))),"int"==a.props.columnDataTypes[r]?a._resultedRow[r]+=parseInt(n)||0:"serial"==a.props.columnDataTypes[r]&&(a._resultedRow[r]=a.rowIdxToDisplay),"link"==a.props.columnDataTypes[r]){if(l&&l.row===t&&l.cell===r)return s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n);var c=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/gim.exec(n),o=" ";return null!=c?(o=c[1],s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},s.a.createElement("a",{href:n,class:"notFinished",target:"_blank"},o))):s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n)}return"serial"==a.props.columnDataTypes[r]?s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},a.rowIdxToDisplay):s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n)},this))},this)))),this._renderResultRow())}}]),t}(r.Component),b=(a(38),function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(i.a)(this,Object(d.a)(t).call(this,e)),Object(u.a)(Object(u.a)(a)).createComponent=a.createComponent.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).fillCell=a.fillCell.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).fastSearch=a.fastSearch.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).getPartNumber=a.getPartNumber.bind(Object(u.a)(Object(u.a)(a))),a.state={part_number:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"fetchData",value:function(e){var t=new XMLHttpRequest;t.responseType="json",t.onload=function(){var e=t.response;404!=t.status?(console.log("responce: ",e),"true"!=e.success?alert(e.error):(document.getElementById("new_part").reset(),document.getElementById("new_cell").reset())):alert("Returned 404")},t.open("GET",e,!0),t.send(null)}},{key:"getPartNumber",value:function(e){this.setState({part_number:e.target.value})}},{key:"fastSearch",value:function(e){if(""==this.state.part_number)alert("Empty part number!");else{var t="/api/v1/part_numbers/createFast?part_number="+this.state.part_number;console.log(t),this.fetchData(t)}}},{key:"createComponent",value:function(e){e.preventDefault();var t,a="/api/v1/part_numbers/create?",r=0;for(t=0;t<e.target.length;t++)"text"==e.target[t].type&&""!=e.target[t].value&&(0!=r&&(a+="&"),a+=e.target[t].name+"="+encodeURIComponent(e.target[t].value),r++);console.log(a),0!=r?this.fetchData(a):alert("Empty form!")}},{key:"fillCell",value:function(e){e.preventDefault();var t,a="/api/v1/cells/create?",r=0;for(t=0;t<e.target.length;t++)"text"==e.target[t].type&&""!=e.target[t].value&&(0!=r&&(a+="&"),a+=e.target[t].name+"="+encodeURIComponent(e.target[t].value),r++);console.log(a),0!=r?this.fetchData(a):alert("Empty form!")}},{key:"render",value:function(){return s.a.createElement("div",{class:"Row"},s.a.createElement("div",{className:"container"},s.a.createElement("h2",null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430"),s.a.createElement("p",null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043d\u0435\u0441\u0442\u0438 \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445"),s.a.createElement("form",{onSubmit:this.createComponent,id:"new_part"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"part_number"},"Part number")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"part_number",name:"part_number",onChange:this.getPartNumber,placeholder:"RC0402JR-07100RL"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",null,s.a.createElement("input",{type:"button",className:"button",id:"FastSearch",name:"FastSearch",value:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u043f\u043e\u0438\u0441\u043a",onClick:this.fastSearch.bind(this)}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"description"},"Description")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"description",name:"description",placeholder:"RES SMD 100 OHM 5% 1/16W 0402"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"footprint"},"Footprint")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"footprint",name:"footprint",placeholder:"0402"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"temperature"},"Temperature")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"temperature",name:"temperature",placeholder:"-55\xb0C ~ 155\xb0C"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"manufacturer"},"Manufacturer")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"manufacturer",name:"manufacturer",placeholder:"Yageo"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"ref_supplier"},"Ref supplier")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"ref_supplier",name:"ref_supplier",placeholder:"https://www.terraelectronica.ru/product/336102"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"help_url"},"Help URL")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"help_url",name:"help_url",placeholder:"https://www.digikey.com/product-detail/en/yageo/RC0402JR-07100RL/311-100JRCT-ND/729362"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"component_type"},"Component type")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"component_type",name:"component_type",placeholder:"resistor"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"family_type"},"Family type")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"family_type",name:"family_type",placeholder:"RC"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"component_series"},"Component series")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"component_series",name:"component_series",placeholder:"RC"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"price_1_pcs"},"Price for 1 pcs, USD")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"price_1_pcs",name:"price_1_pcs",placeholder:"0.0011"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"price_10_pcs"},"Price for 10 pcs, USD")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"price_10_pcs",name:"price_10_pcs",placeholder:"0.001"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"price_100_pcs"},"Price for 100 pcs, USD")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"price_100_pcs",name:"price_100_pcs",placeholder:"0.0007"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"price_1000_pcs"},"Price for 1000 pcs, USD")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"price_1000_pcs",name:"price_1000_pcs",placeholder:"0.0003"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"datasheet_url"},"Datasheet URL")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"datasheet_url",name:"datasheet_url",placeholder:"http://www.yageo.com/documents/recent/PYu-RC_Group_51_RoHS_L_10.pdf"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"statuss"},"Part status")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"statuss",name:"status",placeholder:"active"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-submit"},s.a.createElement("input",{type:"submit",id:"submit",name:"submit",value:"\u0412\u043d\u0435\u0441\u0442\u0438"}))))),s.a.createElement("div",{className:"container"},s.a.createElement("h2",null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 \u0441\u043a\u043b\u0430\u0434\u0430"),s.a.createElement("p",null,"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u044f\u0447\u0435\u0439\u043a\u0438, \u0430\u0440\u0442\u0438\u043a\u0443\u043b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430, \u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e, \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430 "),s.a.createElement("form",{onSubmit:this.fillCell,id:"new_cell"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"part_number"},"Cell idx")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"cellIdx",name:"cellIdx",placeholder:"3A1"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"part_number"},"Part number")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"part_number",name:"part_number",placeholder:"RC0402JR-07100RL"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"qty"},"Quantity")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"qty",name:"qty",placeholder:"50"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"supplier_link"},"Supplier link")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"supplier_link",name:"supplier_link",placeholder:"https://www.digikey.com/product-detail/en/yageo/RC0402JR-07100RL/311-100JRCT-ND/729362"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-25"},s.a.createElement("label",{htmlFor:"notes"},"Notes")),s.a.createElement("div",{className:"col-75"},s.a.createElement("input",{type:"text",id:"notes",name:"notes",placeholder:"Already used in hardware"}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-submit"},s.a.createElement("input",{type:"submit",id:"submit2",name:"submit2",value:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}))))))}}]),t}(r.Component)),f=a(8),y=(a(45),a(11)),E=document.body,_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e)))._preSearchData=a.props.initialData,a.state={data:a.props.initialData,sortby:null,descending:!1,edit:null,search:a.props.search,hideCompleted:!1},a._searchFields=Array(a.props.headers.length).join(".").split("."),a._resultedRow=Array(a.props.headers.length).join(".").split("."),Object(u.a)(Object(u.a)(a))._search=a._search.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).search_loop=a.search_loop.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._showEditor=a._showEditor.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._renderSearch=a._renderSearch.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._sort=a._sort.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._save=a._save.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).requestParcelsList=a.requestParcelsList.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"hideCompleted",value:function(e){this.setState({hideCompleted:e})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){setInterval(this.requestParcelsList,3e3)}},{key:"requestParcelsList",value:function(){this.fetchData("/api/v1/parcels")}},{key:"updateData",value:function(e){for(var t=e,a=0;a<e.length;a++)for(var r=e[a],s=0;s<r.length;s++)null==r[s]&&(console.log("null",r[s]),r[s]="");this.setState({data:t}),this._preSearchData=t;var n=this.search_loop(this._preSearchData);this.sort_data(n,this._sortingColumn,!1)}},{key:"sort_data",value:function(e,t){var a,r=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._sortingColumn=t,a=s?this.state.sortby===t&&!this.state.descending:this.state.sortby===t&&this.state.descending,e.sort(function(e,s){var n=0,l=0,c=r.props.headers[t];if("numeric"==r.props.columnDataTypes[t]||"int"==r.props.columnDataTypes[t])""!=e[c]&&(n=parseInt(e[c],10)),""!=s[c]&&(l=parseInt(s[c],10));else if("alphaNumeric"==r.props.columnDataTypes[t]){var o=/(?<!\d)[\d](?!\d)/g;n=e[c].replace(o,"0$&"),l=s[c].replace(o,"0$&")}else n=e[c],l=s[c];return 0==a?n<l?-1:n>l?1:0:n<l?1:n>l?-1:0}),this.setState({data:e,sortby:t,descending:a})}},{key:"_sort",value:function(e){var t=e.target.cellIndex,a=this.state.data.slice();this.sort_data(a,t)}},{key:"_showEditor",value:function(e){this.setState({edit:{row:parseInt(e.target.dataset.row,10),cell:e.target.cellIndex}})}},{key:"postData",value:function(e,t){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&a.status},a.send(JSON.stringify(t))}},{key:"fetchData",value:function(e){var t=this,a=new XMLHttpRequest;a.responseType="json",a.onload=function(){var e=a.response;if("true"!=e.success)alert(e.error);else if("data"in e){var r=JSON.parse(e.data);null!=r&&t.updateData(r)}},a.open("GET",e,!0),a.send(null)}},{key:"_save",value:function(e){e.preventDefault();var t=e.target.firstChild,a=this.state.data.slice(),r=this.state.edit.row,s=this.state.edit.cell,n=this.props.headers[s],l=t.value,c=this.state.data[r][this.props.headers[0]],o=this.state.data[r][this.props.headers[4]];console.log("param ",n," val ",l),this.fetchData("/api/v1/cell/"+c+"?action=update&param="+n+"&val="+encodeURIComponent(l)+"&part_number="+o),y(this.state.edit,"edit field can't be undefined here!"),a[this.state.edit.row][this.state.edit.cell]=t.value,this.setState({edit:null,data:a})}},{key:"search_loop",value:function(e){for(var t=this,a=0,r="",s=0;s<this._searchFields.length;s++)a=s,""!=(r=this._searchFields[s])&&(e=e.filter(function(e){return"numeric"==t.props.columnDataTypes[s]||"int"==t.props.columnDataTypes[s]?e[t.props.headers[a]]==r:e[t.props.headers[a]].toString().toLowerCase().indexOf(r)>-1}));return e}},{key:"_search",value:function(e){var t=e.target.value.toLowerCase(),a=e.target.dataset.idx;this._searchFields[a]=t;var r=this._preSearchData;r=this.search_loop(r),this.sort_data(r,this._sortingColumn,!1)}},{key:"exportBlob",value:function(e,t){var a=window.URL||window.webkitURL,r=new Blob([t],{type:"text/"+e}),s=document.createElement("a"),n=a.createObjectURL(r);s.href=n,s.download="data."+e,null!=E&&E.appendChild(s),s.click(),setTimeout(function(){null!=E&&E.removeChild(s),window.URL.revokeObjectURL(n)},0)}},{key:"exportJSON",value:function(){var e=JSON.stringify(this.state.data);this.exportBlob("json",e)}},{key:"exportCSV",value:function(){var e=this.state.data.reduce(function(e,t){return e+t.reduce(function(e,a,r){return e+'"'+a.replace(/"/g,'""')+'"'+(r<t.length-1?",":"")},"")+"\n"},"");this.exportBlob("csv",e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"Excel"},this._renderTable())}},{key:"_renderSearch",value:function(){var e=this;return this.state.search?s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return s.a.createElement("td",{key:a,class:e.props.columnClasses[a]},s.a.createElement("input",{type:"text","data-idx":a}))})):null}},{key:"_renderResultRow",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return a==e.props.headers.length-1?s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e.rowIdxToDisplay):s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e._resultedRow[a])}))))}},{key:"componentDidUpdate",value:function(e,t){this._focusElem&&this._focusElem.focus()}},{key:"_renderTable",value:function(){var e,t=this;for(this.rowIdxToDisplay=0,e=0;e<this._resultedRow.length;e++)"int"==this.props.columnDataTypes[e]?this._resultedRow[e]=0:"serial"==this.props.columnDataTypes[e]&&(this._resultedRow[e]=0);return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",{onClick:this._sort},s.a.createElement("tr",null,this.props.headers.map(function(e,a){return t.state.sortby===a&&(e+=t.state.descending?" \u2191":" \u2193"),s.a.createElement("th",{key:a,class:t.props.columnClasses[a]},e)},this))))),s.a.createElement("div",{class:"tbl"},s.a.createElement("table",null,s.a.createElement("tbody",{onDoubleClick:this._showEditor},this._renderSearch(),this.state.data.map(function(e,t){var a=this;return this.rowIdxToDisplay+=1,s.a.createElement("tr",{key:t,class:"notFinished"},this.props.headers.map(function(e,r){var n=a.state.data[t][e],l=a.state.edit;if(l&&l.row===t&&l.cell===r&&(n=s.a.createElement("form",{onSubmit:a._save},s.a.createElement("input",{type:"text",defaultValue:n,ref:function(e){return a._focusElem=e}}))),"int"==a.props.columnDataTypes[r]?a._resultedRow[r]+=parseInt(n)||0:"serial"==a.props.columnDataTypes[r]&&(a._resultedRow[r]=a.rowIdxToDisplay),"link"==a.props.columnDataTypes[r]){if(l&&l.row===t&&l.cell===r)return s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n);var c=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/gim.exec(n),o=" ";return null!=c?(o=c[1],s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},s.a.createElement("a",{href:n,class:"notFinished",target:"_blank"},o))):s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n)}return"serial"==a.props.columnDataTypes[r]?s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},a.rowIdxToDisplay):s.a.createElement("td",{class:a.props.columnClasses[r],key:r,"data-row":t},n)},this))},this)))),this._renderResultRow())}}]),t}(r.Component);a(47),a(12);var g=a(24),w=a(26),O=(a(11),[{value:"chocolate",label:"Chocolate"},{value:"strawberry",label:"Strawberry"},{value:"vanilla",label:"Vanilla"}]),k=document.body,j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).importJSON_=function(e){var t=new FormData;t.append("file",e.target.value),console.log(t)},a.handleChange=function(e){console.log("Option selected:",e),a.setState({selectedDevice:e}),a.fetchData("/api/v1/deviceBom?device_id="+e.value)},a._preSearchData=a.props.initialData,a.state={data:a.props.initialData,bomSoldered:null,sortby:null,descending:!1,edit:null,search:a.props.search,hideCompleted:!1,selectedOption:null,deviceList:null,selectedDevice:null,sortColumn:""},a._searchFields=Array(a.props.headers.length).join(".").split("."),a._resultedRow=Array(a.props.headers.length).join(".").split("."),Object(u.a)(Object(u.a)(a))._search=a._search.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).search_loop=a.search_loop.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._showEditor=a._showEditor.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._renderSearch=a._renderSearch.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._sort=a._sort.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a)).importJSON=a.importJSON.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._save=a._save.bind(Object(u.a)(Object(u.a)(a))),Object(u.a)(Object(u.a)(a))._renderButton=a._renderButton.bind(Object(u.a)(Object(u.a)(a))),a._markSoldered=a._markSoldered.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"hideCompleted",value:function(e){this.setState({hideCompleted:e})}},{key:"componentWillMount",value:function(){}},{key:"solderingSequenceCleanup",value:function(){for(var e=[],t=0;t<300;t++)e.push(!1);this.setState({bomSoldered:e})}},{key:"componentDidMount",value:function(){this.fetchData("/api/v1/deviceList"),this.solderingSequenceCleanup(),O.push({value:"orange",label:"Orange"})}},{key:"updateData",value:function(e){for(var t=e,a=0;a<e.length;a++)for(var r=e[a],s=0;s<r.length;s++)null==r[s]&&(console.log("null",r[s]),r[s]="");console.log("bom size: ",t.length),this.setState({data:t}),this._preSearchData=t;var n=this.search_loop(this._preSearchData);this.sort_data(n,this._sortingColumn,!1)}},{key:"sort_data",value:function(e,t){var a,r=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._sortingColumn=t,a=s?this.state.sortby===t&&!this.state.descending:this.state.sortby===t&&this.state.descending,e.sort(function(e,s){var n=0,l=0,c=r.props.headers[t];if("numeric"==r.props.columnDataTypes[t]||"int"==r.props.columnDataTypes[t])""!=e[c]&&(n=parseInt(e[c],10)),""!=s[c]&&(l=parseInt(s[c],10));else if("alphaNumeric"==r.props.columnDataTypes[t]){var o=/(?<!\d)[\d](?!\d)/g;n=e[c].replace(o,"0$&"),l=s[c].replace(o,"0$&")}else n=e[c],l=s[c];return 0==a?n<l?-1:n>l?1:0:n<l?1:n>l?-1:0}),this.setState({data:e,sortby:t,descending:a})}},{key:"_sort",value:function(e){var t=e.target.cellIndex;console.log("sortColumn: ",t,this.props.headers[t]),this.setState({sortColumn:this.props.headers[t]});var a=this.state.data.slice();this.solderingSequenceCleanup(),this.sort_data(a,t)}},{key:"_showEditor",value:function(e){this.setState({edit:{row:parseInt(e.target.dataset.row,10),cell:e.target.cellIndex}})}},{key:"_markSoldered",value:function(e){if("soldersequence"==this.state.sortColumn){var t=e.target.cellIndex,a=parseInt(e.target.dataset.row,10),r=this.state.data[a][this.props.headers[5]],s=this.state.data[a][this.props.headers[2]];if(7==t){console.log(" row ",a," cellIdx ",r," qty ",s),this.fetchData("/api/v1/cellComponentsSoldered?cellIdx="+r+"&qty="+s);var n=this.state.bomSoldered;n[a]=!0,this.setState({bomSoldered:n})}}}},{key:"checkIfResponceValid",value:function(e){return"true"==e.success||("string"!=typeof e.error?(alert(e.error.Message),console.log(e.error.Message),!1):(alert(e.error),console.log(e.error),!1))}},{key:"fetchData",value:function(e){var t=this,a=new XMLHttpRequest;a.responseType="json",console.log("fetchData: ",e),a.onload=function(){var r=a.response;t.state.selectedDevice;if("/api/v1/deviceList"==e){if(0==t.checkIfResponceValid(r))return;var s=r.data.replace(new RegExp("device_id","g"),"value").replace(new RegExp("device_name","g"),"label"),n=JSON.parse(s);t.setState({deviceList:n,selectedDevice:n[0]}),t.fetchData("/api/v1/deviceBom?device_id="+n[0].value)}else if(-1!==e.indexOf("/api/v1/deviceBomUpdate")){if(console.log("fetchData deviceBomUpdate"),0==t.checkIfResponceValid(r))return;t.fetchData("/api/v1/deviceBom?device_id="+t.state.selectedDevice.value)}else if(-1!==e.indexOf("/api/v1/deviceBom")){if(0==t.checkIfResponceValid(r))return;s=r.data.replace(new RegExp("qty","g"),"perDevice").replace(new RegExp("null","g"),"0");var l=JSON.parse(s);t.updateData(l)}else if(-1!==e.indexOf("/api/v1/cellComponentsSoldered")){if("true"!=r.success){var c=prompt(r.error+"enter new cellIdx","Null");null==c||""==c?console.log("new cell idx not entered"):console.log("new cell idx: ",c)}t.fetchData("/api/v1/deviceBom?device_id="+t.state.selectedDevice.value)}else console.log("unhandled url:",e)},a.open("GET",e,!0),a.send(null)}},{key:"_save",value:function(e){e.preventDefault();var t=e.target.firstChild,a=this.state.data.slice(),r=this.state.edit.row,s=this.state.edit.cell,n=this.props.headers[s],l=t.value,c=this.state.selectedDevice.value,o=this.state.data[r][this.props.headers[0]];this.fetchData("/api/v1/deviceBomUpdate/"+c+"?action=update&param="+n+"&val="+encodeURIComponent(l)+"&part_number="+o),this.setState({edit:null,data:a})}},{key:"search_loop",value:function(e){for(var t=this,a=0,r="",s=0;s<this._searchFields.length;s++)a=s,""!=(r=this._searchFields[s])&&(e=e.filter(function(e){return"numeric"==t.props.columnDataTypes[s]||"int"==t.props.columnDataTypes[s]?e[t.props.headers[a]]==r:e[t.props.headers[a]].toString().toLowerCase().indexOf(r)>-1}));return e}},{key:"_search",value:function(e){var t=e.target.value.toLowerCase(),a=e.target.dataset.idx;this._searchFields[a]=t;var r=this._preSearchData;r=this.search_loop(r),this.sort_data(r,this._sortingColumn,!1)}},{key:"exportBlob",value:function(e,t){var a=window.URL||window.webkitURL,r=new Blob([t],{type:"text/"+e}),s=document.createElement("a"),n=a.createObjectURL(r);s.href=n,s.download="data."+e,null!=k&&k.appendChild(s),s.click(),setTimeout(function(){null!=k&&k.removeChild(s),window.URL.revokeObjectURL(n)},0)}},{key:"exportJSON",value:function(){var e=JSON.stringify(this.state.data);this.exportBlob("json",e)}},{key:"exportCSV",value:function(){var e=this.state.data.reduce(function(e,t){return e+t.reduce(function(e,a,r){return e+'"'+a.replace(/"/g,'""')+'"'+(r<t.length-1?",":"")},"")+"\n"},"");this.exportBlob("csv",e)}},{key:"importJSON",value:function(e){var t=e.target.files[0];console.log(t);var a=prompt("Enter device name","GW-01-Rev3-868");if(null==a||""==a)return console.log("FAIL. Empty device name"),void alert("FAIL. Empty device name");if(t){var r=new FormData;r.append("file",t),this.fetchData("/api/v1/deviceUploadName?deviceName="+a),Object(g.post)("/api/v1/deviceUpload",r).then(function(e){console.log("Post response: ",e),"true"!=e.data.success&&(console.log("ERROR!:",e.data.error),alert(e.data.error))}).catch(function(e){console.log("Post error: ",e)}),console.log(r)}}},{key:"_renderButton",value:function(){this.state.selectedOption;return s.a.createElement("div",null,s.a.createElement("div",{class:"inner"},s.a.createElement("input",{type:"file",name:"myFile",onChange:this.importJSON})),s.a.createElement("div",{class:"inner dropdown"},s.a.createElement(w.a,{value:this.state.selectedDevice,onChange:this.handleChange,options:this.state.deviceList})))}},{key:"render",value:function(){return s.a.createElement("div",{className:"Excel"},this._renderButton(),this._renderTable())}},{key:"_renderSearch",value:function(){var e=this;return this.state.search?s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return s.a.createElement("td",{key:a,class:e.props.columnClasses[a]},s.a.createElement("input",{type:"text","data-idx":a}))})):null}},{key:"_renderResultRow",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("tr",{onChange:this._search},this.props.headers.map(function(t,a){return a==e.props.headers.length-1?s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e.rowIdxToDisplay):s.a.createElement("td",{key:a,class:e.props.columnClasses[a]+" resRow"},e._resultedRow[a])}))))}},{key:"componentDidUpdate",value:function(e,t){this._focusElem&&this._focusElem.focus()}},{key:"_renderTable",value:function(){var e,t=this;for(this.rowIdxToDisplay=0,e=0;e<this._resultedRow.length;e++)"int"==this.props.columnDataTypes[e]?this._resultedRow[e]=0:"serial"==this.props.columnDataTypes[e]&&(this._resultedRow[e]=0);return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",{onClick:this._sort},s.a.createElement("tr",null,this.props.headers.map(function(e,a){return t.state.sortby===a&&(e+=t.state.descending?" \u2191":" \u2193"),s.a.createElement("th",{key:a,class:t.props.columnClasses[a]},e)},this))))),s.a.createElement("div",{class:"tbl"},s.a.createElement("table",null,s.a.createElement("tbody",{onDoubleClick:this._showEditor,onClick:this._markSoldered},this._renderSearch(),this.state.data.map(function(e,t){var a=this,r="notFinished";return 1==this.state.bomSoldered[t]&&(r="finished_"),this.rowIdxToDisplay+=1,s.a.createElement("tr",{key:t,class:r},this.props.headers.map(function(e,n){var l=a.state.data[t][e],c=a.state.edit;if(c&&c.row===t&&c.cell===n&&(l=s.a.createElement("form",{onSubmit:a._save},s.a.createElement("input",{type:"text",defaultValue:l,ref:function(e){return a._focusElem=e}}))),"int"==a.props.columnDataTypes[n]?a._resultedRow[n]+=parseInt(l)||0:"serial"==a.props.columnDataTypes[n]&&(a._resultedRow[n]=a.rowIdxToDisplay),"link"==a.props.columnDataTypes[n]){if(c&&c.row===t&&c.cell===n)return s.a.createElement("td",{class:a.props.columnClasses[n],key:n,"data-row":t},l);var o=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/gim.exec(l),i=" ";return null!=o?(i=o[1],s.a.createElement("td",{class:a.props.columnClasses[n],key:n,"data-row":t},s.a.createElement("a",{href:l,class:r,target:"_blank"},i))):s.a.createElement("td",{class:a.props.columnClasses[n],key:n,"data-row":t},l)}return"serial"==a.props.columnDataTypes[n]?s.a.createElement("td",{class:a.props.columnClasses[n],key:n,"data-row":t},a.rowIdxToDisplay):s.a.createElement("td",{class:a.props.columnClasses[n],key:n,"data-row":t},l)},this))},this)))),this._renderResultRow())}}]),t}(r.Component),D=a(11),C=function(e){function t(e,a){var r;return Object(c.a)(this,t),(r=Object(i.a)(this,Object(d.a)(t).call(this,e,a))).httpRequest=r.httpRequest.bind(Object(u.a)(Object(u.a)(r))),r.fetchData=r.fetchData.bind(Object(u.a)(Object(u.a)(r))),r.hideCompletedTasks=r.hideCompletedTasks.bind(Object(u.a)(Object(u.a)(r))),r.state={isChecked:!1},r}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="Warehouse",setInterval(this.fetchData,3e3),this.fetchData()}},{key:"triggerJson",value:function(){D(this.excel,"excel component is null!"),this.excel.exportJSON()}},{key:"triggerCsv",value:function(){D(this.excel,"excel component is null!"),this.excel.exportCSV()}},{key:"componentWillMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="json",t.onload=function(){R=t.response,e.setState({renderFlag:!0});var a=JSON.stringify(R,function(e,t){return null==t?"":t});R=JSON.parse(a),e.excel.updateData(R)},t.open("GET","/warehouse",!0),t.send(null)}},{key:"httpRequest",value:function(){var e=this,t=new XMLHttpRequest;t.onload=function(){R=t.response,e.excel.updateData(R)},t.open("GET","/warehouse",!0),t.send(null)}},{key:"hideCompletedTasks",value:function(){this.excel.hideCompleted(!this.state.isChecked),this.setState({isChecked:!this.state.isChecked})}},{key:"render",value:function(){var e=this;return this.state.isChecked?"hide":"show",s.a.createElement(f.Tabs,{className:"tabs tabs-1"},s.a.createElement(f.TabLink,{to:"tab1"},"Warehouse"),s.a.createElement(f.TabLink,{to:"tab2"},"Add HW"),s.a.createElement(f.TabLink,{to:"tab3"},"Parcel"),s.a.createElement(f.TabLink,{to:"tab4"},"Device"),s.a.createElement(f.TabContent,{for:"tab1"},s.a.createElement("div",null,s.a.createElement(v,{ref:function(t){return e.excel=t},columnDataTypes:x,columnClasses:S,headers:N,initialData:R,search:!0}))),s.a.createElement(f.TabContent,{for:"tab2"},s.a.createElement("h2",null,s.a.createElement(b,null))),s.a.createElement(f.TabContent,{for:"tab3"},s.a.createElement("div",null,s.a.createElement(_,{ref:function(t){return e.parcel=t},columnDataTypes:T,columnClasses:I,headers:L,initialData:F,search:!0}))),s.a.createElement(f.TabContent,{for:"tab4"},s.a.createElement("div",null,s.a.createElement(j,{ref:function(t){return e.device=t},columnDataTypes:U,columnClasses:q,headers:B,initialData:J,search:!0}))))}}]),t}(r.Component),x=["alphaNumeric","string","string","link","string","numeric","link","link","string","string","serial"],S=["short","long","long","long","long","short","long","long","long","long","short"],N=["cellidx","description","footprint","help_url","part_number","qty","ref_supplier","supplier_link","temperature","notes","idx"],R=[],T=["string","numeric","string","sting","string","link","numeric","string","serial"],I=["long","short","long","long","long","long","short","long","short"],L=["order_id","index_in_parcel","store","tracking_number","part_number","supplier_link","qty","status","idx"],F=[],U=["string","string","numeric","numeric","numeric","string","numeric","serial"],q=["long","long","short","mid","mid","mid","mid","short"],B=["part_number","description","perDevice","instock","solderable","soldercell","soldersequence","idx"],J=[],M=C;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.7f55a02b.chunk.js.map